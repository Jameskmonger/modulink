#!/usr/bin/env node

var link = require('fs-symlink'),
    path = require('path'),
    minimist = require('minimist'),
    indent = require('indenthero'),
    validateArguments = require('./validateArguments');

var args = minimist(process.argv.slice(2));

var issues = validateArguments(args);

if (issues.length > 0) {
    console.log(issues);
    return;
}

/*
if (!args.name) {
    console.log('Usage:');
    console.log('    --name PACKAGE_NAME');
    console.log('        (--name modulink)');
    return;
}
*/

var cwd = process.cwd();
var fromLink = cwd;
var toLink = path.join(cwd, 'node_modules', args.name);

link(fromLink, toLink, 'junction')
    .then(function () {
        console.log('Link created, from:');
        console.log('    ' + fromLink);
        console.log('to:');
        console.log('    ' + toLink);
    })
    .catch(function(err) {
        console.error(err);
    });
